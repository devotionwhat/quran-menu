<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>YouTube Kids Â· custom player</title>
    <!-- Font Awesome 6 (free) for clean icons â€“ matches playful style -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: linear-gradient(145deg, #f9e7b3 0%, #f5d0b8 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
            padding: 16px;
            margin: 0;
        }

        /* main card â€“ like YouTube Kids playful container */
        .kids-player-wrapper {
            max-width: 1000px;
            width: 100%;
            background: #2b3a67; /* deep blue background behind video */
            border-radius: 48px 48px 32px 32px;
            box-shadow: 0 25px 40px rgba(0,0,0,0.3), 0 0 0 8px #ffb347, 0 0 0 12px #4caf92;
            padding: 20px 20px 25px 20px;
            transition: all 0.2s;
        }

        /* header with cute label */
        .kids-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-left: 10px;
        }

        .kids-header h2 {
            background: #ffde7d;
            display: inline-block;
            padding: 8px 24px 8px 24px;
            border-radius: 60px;
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e2b4a;
            letter-spacing: -0.5px;
            box-shadow: 0 6px 0 #c9a53b;
            border: 3px solid white;
            margin: 0;
        }

        .kids-header i {
            font-size: 3rem;
            color: #ff8a5c;
            filter: drop-shadow(2px 4px 0 #b45f3a);
        }

        /* ----- video container (16:9) with absolute iframe and overlay controls ----- */
        .video-container {
            position: relative;
            width: 100%;
            border-radius: 40px;
            overflow: hidden;
            box-shadow: inset 0 0 0 4px white, 0 18px 25px -8px black;
            background: #000; /* fallback */
        }

        .aspect-ratio-box {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 */
            background: #d0e0f0;
        }

        #youtube-player {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            border: none;
        }

        /* ----- custom controls overlay (always visible, like kids UI) ----- */
        .custom-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, #feac6d, #ff7b9c, #a0d6ff);
            padding: 12px 16px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 12px;
            border-top: 5px solid white;
            border-radius: 0 0 40px 40px;
            z-index: 30;
            pointer-events: auto;  /* make buttons clickable above iframe */
            backdrop-filter: blur(4px);
            box-shadow: 0 -4px 0 #fcca4b;
        }

        /* left area (play + time) */
        .controls-left {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1 1 auto;
        }

        /* big round button â€“ very touch friendly */
        .control-button {
            background: white;
            border: none;
            width: 54px;
            height: 54px;
            border-radius: 100px;
            font-size: 2rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 6px 0 #b0b0b0, 0 8px 12px rgba(0,0,0,0.2);
            transition: all 0.05s ease-in;
            color: #1f3a5f;
            border: 3px solid #fff9e6;
            line-height: 1;
            padding: 0;
        }

        .control-button:active {
            transform: translateY(6px);
            box-shadow: 0 2px 0 #909090, 0 5px 10px rgba(0,0,0,0.2);
        }

        .control-button i {
            font-size: 2rem;
            color: #1f3a5f;
        }

        /* time display â€“ bold, friendly */
        .time-display {
            background: #1e2f4a;
            color: white;
            font-size: 1.6rem;
            font-weight: 600;
            padding: 6px 20px;
            border-radius: 40px;
            border: 3px solid #ffd966;
            box-shadow: inset 0 -3px 0 #121f33;
            letter-spacing: 1px;
            white-space: nowrap;
            font-variant-numeric: tabular-nums;
        }

        /* progress bar container â€“ giant, easy to tap */
        .progress-bar-container {
            flex: 3 1 200px;
            height: 26px;
            background: #fbe3b0;
            border-radius: 40px;
            border: 4px solid white;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
            cursor: pointer;
            position: relative;
            min-width: 150px;
        }

        .progress-fill {
            height: 100%;
            background: #ff4d6d;
            border-radius: 40px;
            width: 0%;
            box-shadow: 0 0 0 2px white, 0 4px 0 #ac2440;
            transition: width 0.1s linear;
        }

        /* right controls (mute + fullscreen) */
        .controls-right {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 0 1 auto;
        }

        /* extra cute little details */
        .kids-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
            padding: 0 12px;
            color: #fef9d7;
            font-weight: bold;
            text-shadow: 2px 2px 0 #2f4858;
        }

        .kids-footer span {
            background: #57a773;
            padding: 8px 20px;
            border-radius: 60px;
            font-size: 1.2rem;
            border: 3px solid white;
        }

        /* make iframe click-through except controls zone */
        #youtube-player {
            pointer-events: auto;  /* video itself clickable (play/pause) */
        }

        /* mobile adjustments */
        @media (max-width: 550px) {
            .kids-player-wrapper {
                padding: 12px 12px 18px 12px;
                border-radius: 32px;
            }
            .control-button {
                width: 48px;
                height: 48px;
                font-size: 1.8rem;
            }
            .control-button i {
                font-size: 1.8rem;
            }
            .time-display {
                font-size: 1.2rem;
                padding: 4px 12px;
            }
            .progress-bar-container {
                height: 22px;
            }
        }
    </style>
</head>
<body>
<div class="kids-player-wrapper">
    <!-- header: playful & bright -->
    <div class="kids-header">
        <i class="fas fa-star"></i>
        <h2>ðŸ“º KIDS player</h2>
        <i class="fas fa-bolt" style="color: #f9d342;"></i>
    </div>

    <!-- main video area with overlay controls -->
    <div class="video-container">
        <div class="aspect-ratio-box">
            <!-- div that will be replaced by YouTube iframe -->
            <div id="youtube-player"></div>

            <!-- custom controls overlay (always visible, like YouTube Kids) -->
            <div class="custom-controls" id="custom-controls">
                <!-- left block: play/pause + time -->
                <div class="controls-left">
                    <button class="control-button" id="play-pause-btn" aria-label="Play/Pause">
                        <i class="fas fa-play" id="play-pause-icon"></i>
                    </button>
                    <span class="time-display" id="time-display">0:00 / 0:00</span>
                </div>

                <!-- big progress bar (click to seek) -->
                <div class="progress-bar-container" id="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>

                <!-- right block: mute and fullscreen -->
                <div class="controls-right">
                    <button class="control-button" id="mute-btn" aria-label="Mute/Unmute">
                        <i class="fas fa-volume-high" id="mute-icon"></i>
                    </button>
                    <button class="control-button" id="fullscreen-btn" aria-label="Fullscreen">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- footer â€“ just for fun (like kids UI) -->
    <div class="kids-footer">
        <span><i class="fas fa-lock"></i> parent lock</span>
        <span><i class="fas fa-hand"></i> safe mode</span>
    </div>
</div>

<!-- YouTube IFrame API script -->
<script>
    // ---- global variables ----
    let player;                // YouTube player object
    let playerReady = false;   // true when API ready and player initialized
    let progressInterval = null;
    let isPlaying = false;     // track state for UI updates

    // DOM elements
    const playPauseBtn = document.getElementById('play-pause-btn');
    const playPauseIcon = document.getElementById('play-pause-icon');
    const timeDisplay = document.getElementById('time-display');
    const progressFill = document.getElementById('progress-fill');
    const progressBar = document.getElementById('progress-bar');
    const muteBtn = document.getElementById('mute-btn');
    const muteIcon = document.getElementById('mute-icon');
    const fullscreenBtn = document.getElementById('fullscreen-btn');
    const videoContainer = document.querySelector('.video-container'); // for fullscreen

    // ---- helper functions ----
    function formatTime(seconds) {
        if (!seconds || isNaN(seconds)) return '0:00';
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    // update progress bar and time display
    function updateProgressAndTime() {
        if (!player || !playerReady) return;
        const currentTime = player.getCurrentTime();
        const duration = player.getDuration();
        if (duration && duration > 0) {
            const percent = (currentTime / duration) * 100;
            progressFill.style.width = percent + '%';
            timeDisplay.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
        } else {
            // fallback if duration not ready
            timeDisplay.textContent = `0:00 / 0:00`;
        }
    }

    // clear progress interval
    function stopProgressInterval() {
        if (progressInterval) {
            clearInterval(progressInterval);
            progressInterval = null;
        }
    }

    // start interval only if playing
    function startProgressIntervalIfPlaying() {
        stopProgressInterval(); // avoid duplicates
        if (isPlaying && playerReady) {
            progressInterval = setInterval(() => {
                updateProgressAndTime();
            }, 300); // smooth enough
        }
    }

    // update play/pause icon based on state
    function updatePlayPauseIcon(state) {
        if (state === 1) { // playing
            playPauseIcon.className = 'fas fa-pause';
            isPlaying = true;
        } else { // paused, ended, buffering etc
            playPauseIcon.className = 'fas fa-play';
            isPlaying = false;
        }
        // restart interval according to new state
        startProgressIntervalIfPlaying();
    }

    // ---- YouTube API callback ----
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('youtube-player', {
            videoId: 'tgbNymZ7vqY',   // ðŸ¦ˆ Baby Shark â€“ super kid-friendly
            playerVars: {
                controls: 0,           // hide default controls
                disablekb: 1,
                iv_load_policy: 3,     // no annotations
                modestbranding: 1,
                rel: 0,
                showinfo: 0,
                fs: 0,                 // we handle fullscreen manually
                playsinline: 1,
                origin: window.location.origin
            },
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange,
                'onError': onPlayerError
            }
        });
    }

    function onPlayerReady(event) {
        playerReady = true;
        // Set initial duration after a short delay
        setTimeout(() => {
            updateProgressAndTime();
        }, 500);
        // set initial mute icon (not muted by default)
        muteIcon.className = 'fas fa-volume-high';
    }

    function onPlayerStateChange(event) {
        // data: -1 (unstarted), 0 (ended), 1 (playing), 2 (paused), 3 (buffering), 5 (cued)
        const state = event.data;
        updatePlayPauseIcon(state);
        if (state === 0) { // ended
            // reset progress to 0? the video ends at 100% anyway, but we want play icon
            updateProgressAndTime(); // final update
            stopProgressInterval();
        } else if (state === 1) { // playing
            startProgressIntervalIfPlaying();
        } else if (state === 2) { // paused
            stopProgressInterval();
        }
    }

    function onPlayerError(event) {
        console.warn('YouTube error:', event.data);
        // fallback: reset UI, show friendly message (optional)
        timeDisplay.textContent = 'ðŸ˜Š video error';
    }

    // ---- load YouTube iframe API ----
    const tag = document.createElement('script');
    tag.src = 'https://www.youtube.com/iframe_api';
    const firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // ---- custom control event listeners (set up after API ready, but buttons exist) ----

    // Play/Pause
    playPauseBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (!player || !playerReady) return;
        const state = player.getPlayerState();
        if (state === 1) { // playing
            player.pauseVideo();
        } else {
            player.playVideo();
        }
    });

    // Mute toggle
    muteBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (!player || !playerReady) return;
        if (player.isMuted()) {
            player.unMute();
            muteIcon.className = 'fas fa-volume-high';
        } else {
            player.mute();
            muteIcon.className = 'fas fa-volume-off';
        }
    });

    // Fullscreen (on the video container, to include custom controls)
    fullscreenBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (!document.fullscreenElement) {
            if (videoContainer.requestFullscreen) {
                videoContainer.requestFullscreen();
            } else if (videoContainer.webkitRequestFullscreen) { // Safari
                videoContainer.webkitRequestFullscreen();
            } else if (videoContainer.msRequestFullscreen) { // IE/Edge
                videoContainer.msRequestFullscreen();
            }
        } else {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            }
        }
    });

    // Seek via progress bar click
    progressBar.addEventListener('click', (e) => {
        e.stopPropagation();
        if (!player || !playerReady) return;
        const duration = player.getDuration();
        if (!duration || duration <= 0) return;

        // calculate click position relative to progress bar width
        const rect = progressBar.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        let percent = clickX / rect.width;
        percent = Math.min(1, Math.max(0, percent)); // clamp 0-1

        const seekToTime = percent * duration;
        player.seekTo(seekToTime, true);
        // update progress immediately for better feedback
        progressFill.style.width = (percent * 100) + '%';
        // time display will be corrected by interval
    });

    // Optional: also update progress while dragging? for simplicity we skip drag,
    // but click-to-seek is clear and kid-friendly.

    // Make sure the interval stops when not needed; also clean on page unload
    window.addEventListener('beforeunload', () => {
        stopProgressInterval();
    });

    // If player not ready after some time, show a hint (but usually works)
    setTimeout(() => {
        if (!playerReady) {
            timeDisplay.textContent = 'loading...';
        }
    }, 3000);
</script>

<!-- extra fallback for old browsers: show friendly message -->
<noscript>
    <div style="padding: 2rem; text-align: center;">JavaScript required for YouTube Kids player</div>
</noscript>
</body>
</html>
